use IEEE.NUMERIC_STD.ALL;


entity counter is
    generic (tope:integer:=30);
    Port ( clk : in  STD_LOGIC;
           rst : in  STD_LOGIC;
           enable : in  STD_LOGIC;
           count : out  STD_LOGIC_VECTOR (4 downto 0);
           salida : out  STD_LOGIC);
end counter;

architecture Behavioral of counter is
signal cnt: unsigned (4 downto 0);
begin

	process (clk, rst, enable)
	variable salida_aux: std_logic;
	begin
	  if (rst='1') then
	     cnt<=(others=>'0');
		 salida<='0';
	  elsif clk'event and clk='1' then
			if enable ='1' then
			  if cnt<tope then
					cnt<=cnt+1;
					salida<='0';
					if cnt=tope-1 then
						salida<='1';
					end if;
			   else
					cnt<="0000";
					salida<='0';
				end if;
			end if;
	  end if;
	end process;
   count <=std_logic_vector(cnt);

end Behavioral;
